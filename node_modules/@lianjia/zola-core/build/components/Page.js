'use strict';

var propTypes = require('prop-types');
var inherit = require('../utils/inherit');
var Subscribe = require('../utils/subscribe');
var Base = require('./Base');

var Page = inherit('Page', Base, {
  getChildContext: function getChildContext() {
    if (!this.subscribe) this.subscribe = new Subscribe();
    return {
      subscribe: this.subscribe,
      location: this.props.location
    };
  },
  componentWillUnmount: function componentWillUnmount() {
    Base.prototype.componentWillUnmount.call(this);
    if (this.subscribe) this.subscribe.off();
  }
});
Page.childContextTypes = {
  subscribe: propTypes.object,
  location: propTypes.object
};
module.exports = Page;